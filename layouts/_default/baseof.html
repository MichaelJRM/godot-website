<!DOCTYPE html>
<html lang="en">

<head>
    {{ $description := "" }}
    {{ if .Description }}
        {{ $description = .Description }}
    {{ else if .Params.excerpt }}
        {{ $description = .Params.excerpt }}
    {{ else }}
        {{ $description = "Free and open source 2D and 3D game engine" }}
    {{ end }}

	{{ if eq .Path "/" }}
	<script>
		/**
		 * @typedef Author
		 * @type {object}
		 * @property {string} game
		 * @property {string} by
		 * @property {string} url
		 * @property {string} image
		 */

		/** Author[] */
		const authors = [
			{{ range partialCached "_funcs/featured-showcase-pages.html" $ }}
		{
			game: '{{ .Params.title }}',
				by: '{{ .Params.author }}',
			url: '{{ .Params.url }}',
			image: '{{ index .Params.gallery 0 }}',
		},
		{{ end }}
		];

		// Preload hero image
		const author = authors[Math.floor(Math.random() * authors.length)];
		const template = document.createElement('template');
		template.innerHTML = `<link rel="preload" as="image" href="${author.image}" fetchpriority="high"/>`
		document.head.appendChild(template.content.firstChild);
	</script>
	{{ end }}

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Godot Engine">
    <meta name="description" content="{{ $description }}">
    <meta name="theme-color" content="#3d8fcc">
    <meta property="og:site_name" content="Godot Engine">
    <meta property="og:url" content="{{ absLangURL "./" }}">
    <meta name="twitter:site" content="@godotengine">

    <meta property="og:title" content="{{ .Title }}">
    <meta property="og:description" content="{{ $description }}">
    <meta property="og:image" content="{{ absURL (default "/assets/share-image.webp" .Params.image) }}">
    <meta property="og:type" content="{{ default "website" .Params.og_type }}">
    <meta name="twitter:card" content="summary_large_image">
    <title>{{ .Title }}</title>

    <link rel="icon" href="/assets/favicon.png" sizes="any">
    <link rel="icon" href="/assets/favicon.svg" type="image/svg+xml">
    <link rel="stylesheet" href="{{ (resources.Get "css/main.css" | resources.Minify | resources.Fingerprint).RelPermalink }}">
    <link rel="preload" as="font" href="/assets/fonts/Montserrat-Bold.woff2" crossorigin>
    <link rel="preload" as="font" href="/assets/fonts/Montserrat-ExtraBold.woff2" crossorigin>
    <link rel="me" href="https://mastodon.gamedev.place/@godotengine">
</head>

<body>
{{ block "header" . }}
{{ partialCached "header.html" . }}
{{ end }}

{{ block "main" . }}
{{ .Content }}
{{ end }}

{{ block "footer" . }}
{{ partialCached "footer.html" . }}
{{ end }}
</body>
</html>

